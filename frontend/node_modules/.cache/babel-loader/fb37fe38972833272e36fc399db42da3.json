{"ast":null,"code":"var _jsxFileName = \"/Users/kaualandi/dev/atendechat-novo-main/frontend/src/pages/CampaignReport/index.js\";\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport MainContainer from \"../../components/MainContainer\";\nimport MainHeader from \"../../components/MainHeader\";\nimport Title from \"../../components/Title\";\nimport { Grid, LinearProgress, Typography } from \"@material-ui/core\";\nimport api from \"../../services/api\";\nimport { has, get, isNull } from \"lodash\";\nimport CardCounter from \"../../components/Dashboard/CardCounter\";\nimport GroupIcon from \"@material-ui/icons/Group\";\nimport ScheduleIcon from \"@material-ui/icons/Schedule\";\nimport EventAvailableIcon from \"@material-ui/icons/EventAvailable\";\nimport DoneIcon from \"@material-ui/icons/Done\";\nimport DoneAllIcon from \"@material-ui/icons/DoneAll\";\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\nimport WhatsAppIcon from \"@material-ui/icons/WhatsApp\";\nimport ListAltIcon from \"@material-ui/icons/ListAlt\";\nimport { useDate } from \"../../hooks/useDate\";\nimport { socketConnection } from \"../../services/socket\";\nconst useStyles = makeStyles(theme => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(2),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles\n  },\n  textRight: {\n    textAlign: \"right\"\n  },\n  tabPanelsContainer: {\n    padding: theme.spacing(2)\n  }\n}));\nconst CampaignReport = () => {\n  const classes = useStyles();\n  const {\n    campaignId\n  } = useParams();\n  const [campaign, setCampaign] = useState({});\n  const [validContacts, setValidContacts] = useState(0);\n  const [delivered, setDelivered] = useState(0);\n  const [confirmationRequested, setConfirmationRequested] = useState(0);\n  const [confirmed, setConfirmed] = useState(0);\n  const [percent, setPercent] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const mounted = useRef(true);\n  const {\n    datetimeToClient\n  } = useDate();\n  useEffect(() => {\n    if (mounted.current) {\n      findCampaign();\n    }\n    return () => {\n      mounted.current = false;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useEffect(() => {\n    if (mounted.current && has(campaign, \"shipping\")) {\n      if (has(campaign, \"contactList\")) {\n        const contactList = get(campaign, \"contactList\");\n        const valids = contactList.contacts.filter(c => c.isWhatsappValid);\n        setValidContacts(valids.length);\n      }\n      if (has(campaign, \"shipping\")) {\n        const contacts = get(campaign, \"shipping\");\n        const delivered = contacts.filter(c => !isNull(c.deliveredAt));\n        const confirmationRequested = contacts.filter(c => !isNull(c.confirmationRequestedAt));\n        const confirmed = contacts.filter(c => !isNull(c.deliveredAt) && !isNull(c.confirmationRequestedAt));\n        setDelivered(delivered.length);\n        setConfirmationRequested(confirmationRequested.length);\n        setConfirmed(confirmed.length);\n        setDelivered(delivered.length);\n      }\n    }\n  }, [campaign]);\n  useEffect(() => {\n    setPercent(delivered / validContacts * 100);\n  }, [delivered, validContacts]);\n  useEffect(() => {\n    const companyId = localStorage.getItem(\"companyId\");\n    const socket = socketConnection({\n      companyId\n    });\n    socket.on(`company-${companyId}-campaign`, data => {\n      if (data.record.id === +campaignId) {\n        setCampaign(data.record);\n        if (data.record.status === \"FINALIZADA\") {\n          setTimeout(() => {\n            findCampaign();\n          }, 5000);\n        }\n      }\n    });\n    return () => {\n      socket.disconnect();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [campaignId]);\n  const findCampaign = async () => {\n    setLoading(true);\n    const {\n      data\n    } = await api.get(`/campaigns/${campaignId}`);\n    setCampaign(data);\n    setLoading(false);\n  };\n  const formatStatus = val => {\n    switch (val) {\n      case \"INATIVA\":\n        return \"Inativa\";\n      case \"PROGRAMADA\":\n        return \"Programada\";\n      case \"EM_ANDAMENTO\":\n        return \"Em Andamento\";\n      case \"CANCELADA\":\n        return \"Cancelada\";\n      case \"FINALIZADA\":\n        return \"Finalizada\";\n      default:\n        return val;\n    }\n  };\n  return /*#__PURE__*/React.createElement(MainContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(MainHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    style: {\n      width: \"99.6%\"\n    },\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    xs: 12,\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, \"Relat\\xF3rio da \", campaign.name || \"Campanha\")))), /*#__PURE__*/React.createElement(Paper, {\n    className: classes.mainPaper,\n    variant: \"outlined\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    component: \"h2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }\n  }, \"Status: \", formatStatus(campaign.status), \" \", delivered, \" de \", validContacts), /*#__PURE__*/React.createElement(Grid, {\n    spacing: 2,\n    container: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    xs: 12,\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(LinearProgress, {\n    variant: \"determinate\",\n    style: {\n      height: 15,\n      borderRadius: 3,\n      margin: \"20px 0\"\n    },\n    value: percent,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    xs: 12,\n    md: 4,\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CardCounter, {\n    icon: /*#__PURE__*/React.createElement(GroupIcon, {\n      fontSize: \"inherit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 21\n      }\n    }),\n    title: \"Contatos V\\xE1lidos\",\n    value: validContacts,\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }\n  })), campaign.confirmation && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Grid, {\n    xs: 12,\n    md: 4,\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CardCounter, {\n    icon: /*#__PURE__*/React.createElement(DoneIcon, {\n      fontSize: \"inherit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 25\n      }\n    }),\n    title: \"Confirma\\xE7\\xF5es Solicitadas\",\n    value: confirmationRequested,\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    xs: 12,\n    md: 4,\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CardCounter, {\n    icon: /*#__PURE__*/React.createElement(DoneAllIcon, {\n      fontSize: \"inherit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 25\n      }\n    }),\n    title: \"Confirma\\xE7\\xF5es\",\n    value: confirmed,\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    xs: 12,\n    md: 4,\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CardCounter, {\n    icon: /*#__PURE__*/React.createElement(CheckCircleIcon, {\n      fontSize: \"inherit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 21\n      }\n    }),\n    title: \"Entregues\",\n    value: delivered,\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 13\n    }\n  })), campaign.whatsappId && /*#__PURE__*/React.createElement(Grid, {\n    xs: 12,\n    md: 4,\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CardCounter, {\n    icon: /*#__PURE__*/React.createElement(WhatsAppIcon, {\n      fontSize: \"inherit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 23\n      }\n    }),\n    title: \"Conex\\xE3o\",\n    value: campaign.whatsapp.name,\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 15\n    }\n  })), campaign.contactListId && /*#__PURE__*/React.createElement(Grid, {\n    xs: 12,\n    md: 4,\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CardCounter, {\n    icon: /*#__PURE__*/React.createElement(ListAltIcon, {\n      fontSize: \"inherit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 23\n      }\n    }),\n    title: \"Lista de Contatos\",\n    value: campaign.contactList.name,\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    xs: 12,\n    md: 4,\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CardCounter, {\n    icon: /*#__PURE__*/React.createElement(ScheduleIcon, {\n      fontSize: \"inherit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 21\n      }\n    }),\n    title: \"Agendamento\",\n    value: datetimeToClient(campaign.scheduledAt),\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    xs: 12,\n    md: 4,\n    item: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CardCounter, {\n    icon: /*#__PURE__*/React.createElement(EventAvailableIcon, {\n      fontSize: \"inherit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 21\n      }\n    }),\n    title: \"Conclus\\xE3o\",\n    value: datetimeToClient(campaign.completedAt),\n    loading: loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 13\n    }\n  })))));\n};\nexport default CampaignReport;","map":{"version":3,"names":["React","useEffect","useRef","useState","useParams","makeStyles","Paper","MainContainer","MainHeader","Title","Grid","LinearProgress","Typography","api","has","get","isNull","CardCounter","GroupIcon","ScheduleIcon","EventAvailableIcon","DoneIcon","DoneAllIcon","CheckCircleIcon","WhatsAppIcon","ListAltIcon","useDate","socketConnection","useStyles","theme","mainPaper","flex","padding","spacing","overflowY","scrollbarStyles","textRight","textAlign","tabPanelsContainer","CampaignReport","classes","campaignId","campaign","setCampaign","validContacts","setValidContacts","delivered","setDelivered","confirmationRequested","setConfirmationRequested","confirmed","setConfirmed","percent","setPercent","loading","setLoading","mounted","datetimeToClient","current","findCampaign","contactList","valids","contacts","filter","c","isWhatsappValid","length","deliveredAt","confirmationRequestedAt","companyId","localStorage","getItem","socket","on","data","record","id","status","setTimeout","disconnect","formatStatus","val","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","style","width","container","xs","item","name","className","variant","component","height","borderRadius","margin","value","md","icon","fontSize","title","confirmation","Fragment","whatsappId","whatsapp","contactListId","scheduledAt","completedAt"],"sources":["/Users/kaualandi/dev/atendechat-novo-main/frontend/src/pages/CampaignReport/index.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Paper from \"@material-ui/core/Paper\";\n\nimport MainContainer from \"../../components/MainContainer\";\nimport MainHeader from \"../../components/MainHeader\";\nimport Title from \"../../components/Title\";\n\nimport { Grid, LinearProgress, Typography } from \"@material-ui/core\";\nimport api from \"../../services/api\";\nimport { has, get, isNull } from \"lodash\";\nimport CardCounter from \"../../components/Dashboard/CardCounter\";\nimport GroupIcon from \"@material-ui/icons/Group\";\nimport ScheduleIcon from \"@material-ui/icons/Schedule\";\nimport EventAvailableIcon from \"@material-ui/icons/EventAvailable\";\nimport DoneIcon from \"@material-ui/icons/Done\";\nimport DoneAllIcon from \"@material-ui/icons/DoneAll\";\nimport CheckCircleIcon from \"@material-ui/icons/CheckCircle\";\nimport WhatsAppIcon from \"@material-ui/icons/WhatsApp\";\nimport ListAltIcon from \"@material-ui/icons/ListAlt\";\nimport { useDate } from \"../../hooks/useDate\";\n\nimport { socketConnection } from \"../../services/socket\";\n\nconst useStyles = makeStyles((theme) => ({\n  mainPaper: {\n    flex: 1,\n    padding: theme.spacing(2),\n    overflowY: \"scroll\",\n    ...theme.scrollbarStyles,\n  },\n  textRight: {\n    textAlign: \"right\",\n  },\n  tabPanelsContainer: {\n    padding: theme.spacing(2),\n  },\n}));\n\nconst CampaignReport = () => {\n  const classes = useStyles();\n\n  const { campaignId } = useParams();\n\n  const [campaign, setCampaign] = useState({});\n  const [validContacts, setValidContacts] = useState(0);\n  const [delivered, setDelivered] = useState(0);\n  const [confirmationRequested, setConfirmationRequested] = useState(0);\n  const [confirmed, setConfirmed] = useState(0);\n  const [percent, setPercent] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const mounted = useRef(true);\n\n  const { datetimeToClient } = useDate();\n\n  useEffect(() => {\n    if (mounted.current) {\n      findCampaign();\n    }\n\n    return () => {\n      mounted.current = false;\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (mounted.current && has(campaign, \"shipping\")) {\n      if (has(campaign, \"contactList\")) {\n        const contactList = get(campaign, \"contactList\");\n        const valids = contactList.contacts.filter((c) => c.isWhatsappValid);\n        setValidContacts(valids.length);\n      }\n\n      if (has(campaign, \"shipping\")) {\n        const contacts = get(campaign, \"shipping\");\n        const delivered = contacts.filter((c) => !isNull(c.deliveredAt));\n        const confirmationRequested = contacts.filter(\n          (c) => !isNull(c.confirmationRequestedAt)\n        );\n        const confirmed = contacts.filter(\n          (c) => !isNull(c.deliveredAt) && !isNull(c.confirmationRequestedAt)\n        );\n        setDelivered(delivered.length);\n        setConfirmationRequested(confirmationRequested.length);\n        setConfirmed(confirmed.length);\n        setDelivered(delivered.length);\n      }\n    }\n  }, [campaign]);\n\n  useEffect(() => {\n    setPercent((delivered / validContacts) * 100);\n  }, [delivered, validContacts]);\n\n  useEffect(() => {\n    const companyId = localStorage.getItem(\"companyId\");\n    const socket = socketConnection({ companyId });\n\n    socket.on(`company-${companyId}-campaign`, (data) => {\n     \n      if (data.record.id === +campaignId) {\n        setCampaign(data.record);\n\n        if (data.record.status === \"FINALIZADA\") {\n          setTimeout(() => {\n            findCampaign();\n          }, 5000);\n        }\n      }\n    });\n\n    return () => {\n      socket.disconnect();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [campaignId]);\n\n  const findCampaign = async () => {\n    setLoading(true);\n    const { data } = await api.get(`/campaigns/${campaignId}`);\n    setCampaign(data);\n    setLoading(false);\n  };\n\n  const formatStatus = (val) => {\n    switch (val) {\n      case \"INATIVA\":\n        return \"Inativa\";\n      case \"PROGRAMADA\":\n        return \"Programada\";\n      case \"EM_ANDAMENTO\":\n        return \"Em Andamento\";\n      case \"CANCELADA\":\n        return \"Cancelada\";\n      case \"FINALIZADA\":\n        return \"Finalizada\";\n      default:\n        return val;\n    }\n  };\n\n  return (\n    <MainContainer>\n      <MainHeader>\n        <Grid style={{ width: \"99.6%\" }} container>\n          <Grid xs={12} item>\n            <Title>Relatório da {campaign.name || \"Campanha\"}</Title>\n          </Grid>\n        </Grid>\n      </MainHeader>\n      <Paper className={classes.mainPaper} variant=\"outlined\">\n        <Typography variant=\"h6\" component=\"h2\">\n          Status: {formatStatus(campaign.status)} {delivered} de {validContacts}\n        </Typography>\n        <Grid spacing={2} container>\n          <Grid xs={12} item>\n            <LinearProgress\n              variant=\"determinate\"\n              style={{ height: 15, borderRadius: 3, margin: \"20px 0\" }}\n              value={percent}\n            />\n          </Grid>\n          <Grid xs={12} md={4} item>\n            <CardCounter\n              icon={<GroupIcon fontSize=\"inherit\" />}\n              title=\"Contatos Válidos\"\n              value={validContacts}\n              loading={loading}\n            />\n          </Grid>\n          {campaign.confirmation && (\n            <>\n              <Grid xs={12} md={4} item>\n                <CardCounter\n                  icon={<DoneIcon fontSize=\"inherit\" />}\n                  title=\"Confirmações Solicitadas\"\n                  value={confirmationRequested}\n                  loading={loading}\n                />\n              </Grid>\n              <Grid xs={12} md={4} item>\n                <CardCounter\n                  icon={<DoneAllIcon fontSize=\"inherit\" />}\n                  title=\"Confirmações\"\n                  value={confirmed}\n                  loading={loading}\n                />\n              </Grid>\n            </>\n          )}\n          <Grid xs={12} md={4} item>\n            <CardCounter\n              icon={<CheckCircleIcon fontSize=\"inherit\" />}\n              title=\"Entregues\"\n              value={delivered}\n              loading={loading}\n            />\n          </Grid>\n          {campaign.whatsappId && (\n            <Grid xs={12} md={4} item>\n              <CardCounter\n                icon={<WhatsAppIcon fontSize=\"inherit\" />}\n                title=\"Conexão\"\n                value={campaign.whatsapp.name}\n                loading={loading}\n              />\n            </Grid>\n          )}\n          {campaign.contactListId && (\n            <Grid xs={12} md={4} item>\n              <CardCounter\n                icon={<ListAltIcon fontSize=\"inherit\" />}\n                title=\"Lista de Contatos\"\n                value={campaign.contactList.name}\n                loading={loading}\n              />\n            </Grid>\n          )}\n          <Grid xs={12} md={4} item>\n            <CardCounter\n              icon={<ScheduleIcon fontSize=\"inherit\" />}\n              title=\"Agendamento\"\n              value={datetimeToClient(campaign.scheduledAt)}\n              loading={loading}\n            />\n          </Grid>\n          <Grid xs={12} md={4} item>\n            <CardCounter\n              icon={<EventAvailableIcon fontSize=\"inherit\" />}\n              title=\"Conclusão\"\n              value={datetimeToClient(campaign.completedAt)}\n              loading={loading}\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n    </MainContainer>\n  );\n};\n\nexport default CampaignReport;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}